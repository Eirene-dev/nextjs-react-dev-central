---
title: Next.js 페이지 간 이동
date: '2023-01-01 02:02'
summary: Next.js에서 제공하는 Link 컴포넌트를 이용하여 클라이언트-사이드 탐색을 통한 빠르고 효율적인 페이지 간 이동을 구현하는 방법에 대해 설명합니다.
---

<TOCInline toc={props.toc} asDisclosure />

## 페이지 간 탐색 개요

지금까지 만든 Next.js 앱은 오직 한 페이지만 가지고 있습니다. 웹사이트와 웹 어플리케이션은 일반적으로 많은 다양한 페이지들을 가지고 있습니다.

이제 우리 앱에 여러 페이지를 추가하는 방법을 살펴보겠습니다.

이 수업에서 배울 내용:
이 수업에서 다음을 배울 수 있습니다:

- 통합된 파일 시스템 라우팅을 사용하여 새 페이지를 생성합니다.
- 페이지 간의 클라이언트 측 탐색을 활성화하기 위해 Link 컴포넌트를 사용하는 방법을 배웁니다.
- 코드 분할 및 프리페치에 대한 내장 지원에 대해 알게 됩니다.

## Next.js의 페이지들

Next.js에서 페이지란 pages 디렉토리 내의 파일에서 내보내진 React 컴포넌트입니다.

페이지는 파일 이름을 기반으로 경로와 연결됩니다. 예를 들어, 개발 중:

- `pages/index.js`는 `/` 경로와 연결됩니다.
- `pages/posts/first-post.js`는 `/posts/first-post` 경로와 연결됩니다.

우리는 이미 `pages/index.js` 파일을 가지고 있으므로 `pages/posts/first-post.js`를 생성하여 어떻게 작동하는지 살펴보겠습니다.

## 새 페이지 생성하기

`pages` 아래에 `posts` 디렉토리를 생성하세요.

`posts` 디렉토리 내에 `first-post.js`라는 파일을 생성하고 다음의 내용을 추가하세요:

```jsx
export default function FirstPost() {
  return <h1>First Post</h1>;
}
```

컴포넌트는 어떠한 이름을 가질 수 있지만, 이를 기본 내보내기로 내보내야 합니다.

이제 개발 서버가 실행 중인지 확인하고 http://localhost:3000/posts/first-post에 방문하면 페이지를 볼 수 있어야 합니다.

이렇게 Next.js에서 다양한 페이지를 만드는 방법입니다.

단순히 `pages` 디렉토리 아래에 JS 파일을 생성하면, 파일의 경로가 URL 경로가 됩니다.

어떤 면에서는 HTML 또는 PHP 파일을 사용하여 웹사이트를 구축하는 것과 유사합니다. HTML을 작성하는 대신 JSX를 작성하고 React 컴포넌트를 사용합니다.

홈페이지에서 새로 추가된 페이지로 이동할 수 있도록 링크를 추가해 봅시다.

## Link 컴포넌트

웹사이트의 페이지 간에 링크를 생성할 때, `<a>` HTML 태그를 사용합니다.

Next.js에서는 앱 내의 페이지 간에 링크를 생성하기 위해 `next/link`의 Link 컴포넌트를 사용할 수 있습니다. `<Link>`는 클라이언트 측 탐색을 할 수 있게 해주며 탐색 동작에 대한 더 나은 제어를 위해 props를 받습니다.

### `<Link>` 사용하기

먼저, `pages/index.js`를 열고, 상단에 다음 줄을 추가하여 Link 컴포넌트를 `next/link`에서 가져옵니다:

```jsx
import Link from 'next/link';
```

그런 다음, 다음과 같이 보이는 h1 태그를 찾습니다:

```jsx
<h1 className={styles.title}>
  Welcome to <a href="https://nextjs.org">Next.js!</a>
</h1>
```

이를 다음과 같이 변경하세요:

```jsx
<h1 className={styles.title}>
  Read <Link href="/posts/first-post">this page!</Link>
</h1>
```

다음으로, pages/posts/first-post.js를 열고 그 내용을 다음과 같이 바꾸세요:

```jsx
import Link from 'next/link';

export default function FirstPost() {
  return (
    <>
      <h1>First Post</h1>
      <h2>
        <Link href="/">Back to home</Link>
      </h2>
    </>
  );
}
```

보시다시피, Link 컴포넌트는 `<a>` 태그를 사용하는 것과 유사하지만, `<a href="…">` 대신 `<Link href="…">`를 사용합니다.

참고: Next.js 12.2 이전에는 Link 컴포넌트가 `<a>` 태그를 감싸야 했지만, 12.2 버전 이후에는 필요하지 않습니다.

이제 작동하는지 확인해 보겠습니다. 이제 각 페이지에 링크가 있어야 하며, 앞뒤로 이동할 수 있어야 합니다.

## 클라이언트-사이드 탐색
Link 컴포넌트는 동일한 Next.js 앱 내의 두 페이지 간의 클라이언트-사이드 탐색을 가능하게 합니다.

클라이언트-사이드 탐색은 페이지 전환을 자바스크립트를 사용하여 처리하는 것을 의미하며, 이는 브라우저에 의해 수행되는 기본 탐색보다 빠릅니다.

이를 검증하는 간단한 방법은 다음과 같습니다:

- 브라우저의 개발자 도구를 사용하여 `<html>`의 배경 CSS 속성을 `yellow`로 변경합니다.
- 두 페이지 간에 앞뒤로 링크를 클릭합니다.
- 페이지 전환 간에 노란색 배경이 유지되는 것을 볼 수 있습니다.

이것은 브라우저가 전체 페이지를 로드하지 않고 클라이언트-사이드 탐색이 작동한다는 것을 보여줍니다.

`<Link href="…">` 대신 `<a href="…">`를 사용하고 이를 수행하면, 브라우저가 전체를 새로고침하기 때문에 링크 클릭 시 배경색이 지워집니다.

### 코드 분할과 프리페칭
Next.js는 코드 분할을 자동으로 수행하므로 각 페이지는 해당 페이지에 필요한 것만 로드합니다. 즉, 홈페이지가 렌더링될 때 다른 페이지의 코드는 처음에 제공되지 않습니다.

이로 인해 수백 페이지가 있더라도 홈페이지가 빠르게 로드됩니다.

요청한 페이지의 코드만 로딩하면, 페이지가 고립됩니다. 특정 페이지에서 오류가 발생하면 응용 프로그램의 나머지 부분도 계속 작동합니다.

게다가, Next.js의 프로덕션 빌드에서는 `Link` 컴포넌트가 브라우저의 뷰포트에 나타날 때마다, Next.js는 링크된 페이지의 코드를 배경에서 자동으로 프리페치합니다. 링크를 클릭할 때까지 목적지 페이지의 코드가 이미 배경에서 로드되어 있을 것이며, 페이지 전환이 거의 즉시 이루어질 것입니다!

## 요약
Next.js는 코드 분할, 클라이언트-사이드 탐색, 프리페칭(프로덕션에서)을 통해 애플리케이션을 자동으로 최적화하여 최상의 성능을 제공합니다.

`pages` 아래의 파일로 라우트를 생성하고 내장된 `Link` 컴포넌트를 사용합니다. 라우팅 라이브러리는 필요하지 않습니다.

`next/link`에 대한 API 참조 및 일반적인 라우팅에 대한 라우팅 문서에서 Link 컴포넌트에 대해 더 자세히 알아볼 수 있습니다.

참고: Next.js 앱 외부의 외부 페이지로 링크해야 하는 경우, Link 없이 `<a>` 태그만 사용하면 됩니다.