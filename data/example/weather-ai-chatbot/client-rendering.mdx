---
title: "ì±„íŒ… ì„œë¹„ìŠ¤ì— ì‹¤ì‹œê°„ ë‚ ì”¨ ì—°ë™: í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë‚ ì”¨ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§"
summary: "Next.js AI Chatbot"
date: "2024-08-01 02:00"
tags: ['Vercel AI SDK', 'Chatbot', 'ChatGPT']
images: ['/static/images/example/Chatbot.png']
draft: false
---

<TOCInline toc={props.toc} asDisclosure />

## í•™ìŠµ ëª©í‘œ ë° ì†Œê°œ
ì´ë²ˆ í˜ì´ì§€ì—ì„œëŠ” AI ì±—ë´‡ì— [OpenAIì˜ ë„êµ¬(í•¨ìˆ˜ í˜¸ì¶œ)](https://platform.openai.com/docs/guides/function-calling) ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ëŒ€í™” ë¬¸ë§¥ ì¤‘ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤.
ë˜í•œ, ì™¸ë¶€ ì‹¤ì‹œê°„ ë‚ ì”¨ ì œê³µ ì„œë¹„ìŠ¤ì¸ [OpenWeatherMap](https://openweathermap.org/) APIë¥¼ ì—°ë™í•˜ì—¬ ì‚¬ìš©ìì˜ ìœ„ì¹˜ë‚˜ ìš”ì²­ì— ë”°ë¼ ë‚ ì”¨ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ê³ 
ì´ ì •ë³´ë¥¼ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ UIë¡œ í‘œì‹œí•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.

<Callout type="warning" icon="">
ì´ í˜ì´ì§€ì˜ ì˜ˆì œ ì‹¤ìŠµì„ ìœ„í•´ì„œëŠ” ì•„ë˜ í•­ëª©ì— ëŒ€í•œ ì‚¬ì „ í•™ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤.
- [ë‚ ì”¨ AI ì±—ë´‡ ì˜ˆì œ ì†Œê°œ(ì•± ìƒì„±)](/example/weather-ai-chatbot)
- [ê¸°ë³¸ì ì¸ AI ì±„íŒ… ì„œë¹„ìŠ¤](/example/weather-ai-chatbot/chat-simple)
</Callout>

### ì‹¤í–‰ í™”ë©´
<div className="flex overflow-x-scroll gap-0 justify-left p-1 bg-gray-50 overflow-hidden">
  <Image src="/static/images/example/chatbot/2_usechat_1.png" width="240" height="480" alt="ë ˆë²¨ì—… ë‚ ì”¨ AI ì±—ë´‡ v2ì˜ ì œì£¼ë„ ë‚ ì”¨ ë¬¸ì˜ ì‹œì‘" className="shrink-0" />
  <Image src="/static/images/example/chatbot/2_usechat_2.png" width="240" height="480" alt="ë ˆë²¨ì—… ë‚ ì”¨ AI ì±—ë´‡ v2ì˜ ì œì£¼ë„ ë‚ ì”¨ ë¬¸ì˜ ì™„ë£Œ" className="shrink-0" />
  <Image src="/static/images/example/chatbot/2_usechat_3.png" width="240" height="480" alt="ë ˆë²¨ì—… ë‚ ì”¨ AI ì±—ë´‡ v2ì˜ ì œì£¼ë„ ë‚ ì”¨ ë¬¸ì˜ ì™„ë£Œ" className="shrink-0" />
  <Image src="/static/images/example/chatbot/2_usechat_4.png" width="240" height="480" alt="ë ˆë²¨ì—… ë‚ ì”¨ AI ì±—ë´‡ v2ì˜ ì œì£¼ë„ ë‚ ì”¨ ë¬¸ì˜ ì™„ë£Œ" className="shrink-0" />
</div>

### ë°°ìš¸ ë‚´ìš©
ì´ë²ˆ ì‹¤ìŠµì„ í†µí•´ ë°°ìš¸ ìˆ˜ ìˆëŠ” ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
- OpenAIì˜ í•¨ìˆ˜ í˜¸ì¶œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì±—ë´‡ê³¼ ì™¸ë¶€ APIë¥¼ ì—°ë™í•˜ëŠ” ë°©ë²•
- OpenWeatherMap APIë¥¼ í™œìš©í•˜ì—¬ ì‹¤ì‹œê°„ ë‚ ì”¨ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ë²•
- ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•´ ë°›ì€ ë‚ ì”¨ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ UIì— ë Œë”ë§í•˜ëŠ” ë°©ë²•

ì´ í•™ìŠµì„ í†µí•´ AI ì±—ë´‡ì— ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ì—°ë™í•˜ëŠ” ê¸°ìˆ ì„ ìµíˆê³  ë³´ë‹¤ ë™ì ì´ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ì±—ë´‡ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ë™ì‘ êµ¬ì¡°

ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì— ì¶”ê°€ëœ ì „ì²´ ë™ì‘ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

<MermaidChart className="justify-center p-0">
{`
sequenceDiagram
    participant Client
    participant Server
    actor OpenAI
    actor OpenWeatherMap
    Client->>Server: useChat í›… via ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬
    Server->>+OpenAI: streamText í•¨ìˆ˜
    Server->>+OpenAI: getCurrentWeather ë„êµ¬
    OpenAI-->>-Server: weatherSchema ê°ì²´
    OpenAI-->>-Server: stream message
    Server-->>Client: stream message
    opt weatherSchema
        Server-->>Client: weatherSchema ê°ì²´
        Client->>OpenWeatherMap: fetch() via REST API
        OpenWeatherMap-->>Client: Weather JSON ê°ì²´
    end
`}
</MermaidChart>

ì´ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì€ AI ì±—ë´‡ì´ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì „ì²´ ë™ì‘ êµ¬ì¡°ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

1. **Clientì™€ Server ê°„ì˜ ìƒí˜¸ì‘ìš©:**
   - í´ë¼ì´ì–¸íŠ¸ëŠ” `useChat` í›…ì„ í†µí•´ ì„œë²„ì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.
   - ì„œë²„ëŠ” OpenAIì˜ `streamText` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ê³ , í•„ìš”í•œ ê²½ìš° ë‚ ì”¨ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ `getCurrentWeather` ë„êµ¬ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

2. **Providerì™€ Server ê°„ì˜ ìƒí˜¸ì‘ìš©:**
   - OpenAIì˜ ë„êµ¬ í˜¸ì¶œ ê¸°ëŠ¥ì„ í†µí•´ `getCurrentWeather` ë„êµ¬ê°€ ì‹¤í–‰ë˜ë©°, ì„œë²„ëŠ” ë‚ ì”¨ ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” `weatherSchema` ê°ì²´ë¥¼ ë°›ìŠµë‹ˆë‹¤.
   - ì„œë²„ëŠ” ì´ `weatherSchema` ê°ì²´ì™€ í•¨ê»˜ ë©”ì‹œì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ìŠ¤íŠ¸ë¦¬ë°í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.

3. **ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ ì—°ë™:**
   - ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ëœ `weatherSchema` ê°ì²´ë¥¼ í´ë¼ì´ì–¸íŠ¸ê°€ ìˆ˜ì‹ í•©ë‹ˆë‹¤.
   - í´ë¼ì´ì–¸íŠ¸ëŠ” `weatherSchema` ê°ì²´ë¥¼ ë°”íƒ•ìœ¼ë¡œ OpenWeatherMap APIì— ìš”ì²­ì„ ë³´ë‚´ ì‹¤ì‹œê°„ ë‚ ì”¨ ë°ì´í„°ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.
   - OpenWeatherMap APIë¡œë¶€í„° ìˆ˜ì‹ ëœ ë‚ ì”¨ JSON ê°ì²´ë¥¼ í´ë¼ì´ì–¸íŠ¸ê°€ ì²˜ë¦¬í•˜ì—¬ UIì— í‘œì‹œí•©ë‹ˆë‹¤.

---

## ë‚ ì”¨ ê´€ë ¨ êµ¬í˜„
ê°€ì¥ ë¨¼ì € ë‚ ì”¨ì™€ ê´€ë ¨ëœ ìš”ì†Œë¥¼ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.

### OpenWeatherMap ì ‘ê·¼ í‚¤ ì„¤ì •
ë¨¼ì € OpenWeatherMapì—ì„œ ë°œê¸‰ë°›ì€ í‚¤ë¥¼ í™˜ê²½ ë³€ìˆ˜ì— ì¶”ê°€í•©ë‹ˆë‹¤.
```bash:.env.local showLineNumbers {3}
OPENAI_API_KEY="your-openai-key"

NEXT_PUBLIC_OPENWEATHERMAP_KEY="your-openweathermap-key"
```
> í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼í•´ì•¼ í•˜ë¯€ë¡œ í™˜ê²½ ë³€ìˆ˜ ì´ë¦„ ì•ì— `NEXT_PUBLIC_`ì„ ë¶™ì…ë‹ˆë‹¤.

### ë‚ ì”¨ ê°ì²´ ì •ì˜ì™€ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì— `base` í´ë”ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ì•ˆì— `weather.ts` íŒŒì¼ì„ ë§Œë“¤ì–´ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•©ë‹ˆë‹¤.

```tsx:base/weather.ts showLineNumbers
import { z } from 'zod';

export const weatherSchema = z.object({
  location: z.string().describe('The city and state in English, even if the input is in Korean, e.g., Seoul, Jeju.').describe('ë„ì‹œì™€ ì£¼ì˜ ì´ë¦„ì€ ì˜ì–´ë¡œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤. ì…ë ¥ì´ í•œê¸€ì¼ì§€ë¼ë„ ì˜ì–´ ë„ì‹œ ì´ë¦„ìœ¼ë¡œ ë³€í™˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆ: ì„œìš¸ -> Seoul, ì œì£¼ -> Jeju'),
  nation: z.string().describe('The country or nation of the location, e.g., S.Korea'),
  unit: z.enum(['celsius', 'fahrenheit']).describe('The temperature unit to use. Infer this from the user\'s location.'),
  language: z.string().describe('The language of the nation, e.g., í•œêµ­ì–´'),
});

export type WeatherParams = z.infer<typeof weatherSchema>;

export async function fetchWeatherData(params: WeatherParams) {
  const apiKey = process.env.NEXT_PUBLIC_OPENWEATHERMAP_KEY; // OpenWeatherMap API key
  const url = `https://api.openweathermap.org/data/2.5/weather?q=${params.location}&appid=${apiKey}&units=metric`;

  console.info('fetchWeatherData()', params.location)

  try {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Error: ${response.statusText}`);
    }
    const data = await response.json();
    console.info(data)

    return {
      location: params.location,
      nation: params.nation,
      temperature: data.main.temp,
      weather: data.weather[0].description,
      unit: params.unit,
      language: params.language,
      details: {
        temperature: data.main.temp,
        weather: data.weather[0].main,
        info: data.weather[0].description,
        feels_like: data.main.feels_like,
        temp_min: data.main.temp_min,
        temp_max: data.main.temp_max,
        pressure: data.main.pressure,
        humidity: data.main.humidity,
        wind_speed: data.wind.speed,
        wind_deg: data.wind.deg,
        sunrise: data.sys.sunrise,
        sunset: data.sys.sunset,
        location: data.location,
        nation: data.nation,
        format: data.format,
      },
    };
  } catch (error) {
    console.error('Failed to fetch weather data:', error);
    return null;
  }
}
```

ì´ ì½”ë“œëŠ” ë‚ ì”¨ ì •ë³´ë¥¼ ì²˜ë¦¬í•˜ê³  ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. 

1. **`z.object`ì™€ `weatherSchema` ì •ì˜**

    ```tsx
    import { z } from 'zod';

    export const weatherSchema = z.object({
    location: z.string().describe('The city and state in English, even if the input is in Korean, e.g., Seoul, Jeju.').describe('ë„ì‹œì™€ ì£¼ì˜ ì´ë¦„ì€ ì˜ì–´ë¡œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤. ì…ë ¥ì´ í•œê¸€ì¼ì§€ë¼ë„ ì˜ì–´ ë„ì‹œ ì´ë¦„ìœ¼ë¡œ ë³€í™˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆ: ì„œìš¸ -> Seoul, ì œì£¼ -> Jeju'),
    nation: z.string().describe('The country or nation of the location, e.g., S.Korea'),
    unit: z.enum(['celsius', 'fahrenheit']).describe('The temperature unit to use. Infer this from the user\'s location.'),
    language: z.string().describe('The language of the nation, e.g., í•œêµ­ì–´'),
    });
    ```

    - **`z.object`**: `z.object`ëŠ” `zod` ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ, ê°ì²´ì˜ êµ¬ì¡°ì™€ íƒ€ì…ì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íŠ¹ì • ë°ì´í„° êµ¬ì¡°ê°€ ì˜¬ë°”ë¥¸ í˜•ì‹ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - **`weatherSchema`**: ì´ ê°ì²´ëŠ” ë‚ ì”¨ ë°ì´í„°ë¥¼ ìš”ì²­í•  ë•Œ í•„ìš”í•œ í•„ë“œë¥¼ ì •ì˜í•©ë‹ˆë‹¤. 

    `z.object`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë°ì´í„°ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì˜ˆìƒí•˜ì§€ ëª»í•œ ë°ì´í„° êµ¬ì¡°ë‚˜ íƒ€ì…ì˜ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. **`export type WeatherParams = z.infer<typeof weatherSchema>;` ì„¤ëª…**

    ```tsx
    export type WeatherParams = z.infer<typeof weatherSchema>;
    ```

    - **`export type`**: ì´ êµ¬ë¬¸ì€ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì´ íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‚´ë³´ë‚´ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë‚˜ ëª¨ë“ˆì—ì„œë„ ì´ íƒ€ì… ì •ì˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - **`z.infer<typeof weatherSchema>`**: `z.infer`ëŠ” `zod` ìŠ¤í‚¤ë§ˆë¡œë¶€í„° íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íƒ€ì…ì„ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ì¦‰, `weatherSchema`ì—ì„œ ì •ì˜ëœ í•„ë“œì™€ íƒ€ì…ì— ë”°ë¼ `WeatherParams` íƒ€ì…ì„ ìœ ì¶”í•˜ê³  ìƒì„±í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í‚¤ë§ˆì™€ íƒ€ì… ì •ì˜ê°€ ì¼ì¹˜í•˜ë¯€ë¡œ, íƒ€ì… ê´€ë¦¬ê°€ ë” ì‰¬ì›Œì§€ê³  ì‹¤ìˆ˜í•  ê°€ëŠ¥ì„±ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.

3. **`fetchWeatherData()` í•¨ìˆ˜ ë™ì‘ ì„¤ëª…**

    ```tsx
    export async function fetchWeatherData(params: WeatherParams) {
        const apiKey = process.env.NEXT_PUBLIC_OPENWEATHERMAP_KEY; // OpenWeatherMap API key
        const url = `https://api.openweathermap.org/data/2.5/weather?q=${params.location}&appid=${apiKey}&units=metric`;
        // ...
    ```

    - **`fetchWeatherData()`**: ì´ í•¨ìˆ˜ëŠ” `WeatherParams` íƒ€ì…ì˜ ì¸ìë¥¼ ë°›ì•„, OpenWeatherMap APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹¤ì‹œê°„ ë‚ ì”¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    - **API í‚¤**: `process.env.NEXT_PUBLIC_OPENWEATHERMAP_KEY`ë¥¼ í†µí•´ í™˜ê²½ ë³€ìˆ˜ì— ì €ì¥ëœ OpenWeatherMap API í‚¤ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ì„ ì¸ì¦í•©ë‹ˆë‹¤.
    - **API ìš”ì²­**: `fetch` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ OpenWeatherMap APIì— HTTP GET ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. ìš”ì²­ URLì—ëŠ” ë„ì‹œëª…ê³¼ API í‚¤, ê·¸ë¦¬ê³  ì˜¨ë„ ë‹¨ìœ„ê°€ í¬í•¨ë©ë‹ˆë‹¤.
    - **ì—ëŸ¬ ì²˜ë¦¬**: ìš”ì²­ì´ ì‹¤íŒ¨í•  ê²½ìš° `response.ok`ë¥¼ í™•ì¸í•˜ì—¬ ì˜¤ë¥˜ë¥¼ ê°ì§€í•˜ê³ , `Error` ê°ì²´ë¥¼ ìƒì„±í•´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
    - **ë°ì´í„° ì²˜ë¦¬**: ì„±ê³µì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ë©´ `response.json()`ì„ í˜¸ì¶œí•´ JSON ê°ì²´ë¡œ ë³€í™˜í•œ í›„, í•„ìš”í•œ ë°ì´í„°(ì˜¨ë„, ë‚ ì”¨ ìƒíƒœ ë“±)ë¥¼ ì¶”ì¶œí•˜ì—¬ ê°ì²´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
    - **ë°˜í™˜ ê°’**: ë‚ ì”¨ ë°ì´í„°ì™€ ê´€ë ¨ëœ ì—¬ëŸ¬ ì •ë³´ë¥¼ ê°ì²´ í˜•íƒœë¡œ ë°˜í™˜í•˜ë©°, ë§Œì•½ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ `null`ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

    ì´ í•¨ìˆ˜ëŠ” ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•µì‹¬ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë©° ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ì´í›„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

### ë‚ ì”¨ UI ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
ì´ì œ ë‚ ì”¨ ì •ë³´ë¥¼ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë Œë”ë§í•˜ê¸° ìœ„í•´ UIë¥¼ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.
`components/` í´ë” ë‚´ì— `weather-card.tsx` íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•©ë‹ˆë‹¤.

```tsx:components/weather-card.tsx showLineNumbers
export default function WeatherCard({ data }: { data: string }) {
  const { location, nation, temperature, weather, unit, language, details } = JSON.parse(data);

  function getWeatherIcon(weather: string) {
    switch (weather) {
      case 'Clear':
        return 'â˜€ï¸';
      case 'Clouds':
        return 'â˜ï¸';
      case 'Rain':
        return 'ğŸŒ§ï¸';
      case 'Snow':
        return 'â„ï¸';
      case 'Mist':
        return 'ğŸŒ«ï¸';
      default:
        return 'ğŸŒˆ';
    }
  }

  return (
    <div className="p-6 text-white bg-blue-500 rounded-lg shadow-md">
      <h2 className="text-2xl font-bold">{location}, {nation}</h2>
      <div className="flex items-center justify-between">
        <span>{weather}</span>
        <span className="text-4xl">{getWeatherIcon(weather)}</span>
      </div>
      <p className="mt-2 text-4xl font-semibold">
        {temperature}Â°{unit === 'celsius' ? 'C' : 'F'}
      </p>
    </div>
  );
}
```
ì´ ì½”ë“œì—ì„œëŠ” `WeatherCard`ë¼ëŠ” ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì˜í•˜ì—¬ ë‚ ì”¨ ì •ë³´ë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.

- **`WeatherCard` ì»´í¬ë„ŒíŠ¸**: ì´ ì»´í¬ë„ŒíŠ¸ëŠ” `data`ë¼ëŠ” propì„ ë°›ì•„, ì´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ ë‚ ì”¨ ì •ë³´(ìœ„ì¹˜, êµ­ê°€, ì˜¨ë„, ë‚ ì”¨ ìƒíƒœ ë“±)ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
- **`getWeatherIcon` í•¨ìˆ˜**: ë‚ ì”¨ ìƒíƒœ(`weather`)ì— ë”°ë¼ ì ì ˆí•œ ì´ëª¨ì§€ë¥¼ ë°˜í™˜í•˜ì—¬ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.

ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ì£¼ì–´ì§„ ë‚ ì”¨ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ UIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---

## ì„œë²„ì—ì„œ OpenAI ë„êµ¬(í•¨ìˆ˜ í˜¸ì¶œ) ì •ì˜

ì´ì œ ì•ì—ì„œ êµ¬í˜„í•œ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬, ì„œë²„ì—ì„œ OpenAIì˜ ë„êµ¬(í•¨ìˆ˜ í˜¸ì¶œ)ë¥¼ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.
`app/api/route.ts` íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.


```ts:app/api/route.ts showLineNumbers {4, 14-19}
import { openai } from '@ai-sdk/openai';
import { convertToCoreMessages, streamText } from 'ai';

import { weatherSchema } from '@/base/weather';

export const maxDuration = 30;

export async function POST(req: Request) {
  const { messages } = await req.json();

  const result = await streamText({
    model: openai('gpt-4o'),
    messages: convertToCoreMessages(messages),
    tools: {
      getCurrentWeather: {
        description: 'Get the current weather information for a specific city or region. The user can provide the name of the city and nation, and optionally specify the temperature unit (Celsius or Fahrenheit) and the language for the response.',
        parameters: weatherSchema,
      },
    },
  });

  return result.toAIStreamResponse();
}
```

ì´ ì½”ë“œëŠ” OpenAI APIì™€ì˜ í†µì‹ ì—ì„œ íŠ¹ì • ë„êµ¬(í•¨ìˆ˜ í˜¸ì¶œ)ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

1. **`import { weatherSchema } from '@/base/weather';`**

    ì´ êµ¬ë¬¸ì€ ì•ì„œ ì •ì˜í•œ `weatherSchema` ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ìŠ¤í‚¤ë§ˆëŠ” ë‚ ì”¨ ì •ë³´ë¥¼ ìš”ì²­í•  ë•Œ í•„ìš”í•œ íŒŒë¼ë¯¸í„°(ì˜ˆ: ìœ„ì¹˜, êµ­ê°€, ì˜¨ë„ ë‹¨ìœ„ ë“±)ì˜ êµ¬ì¡°ì™€ íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´, OpenAIê°€ í•´ë‹¹ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ ì…ë ¥ ë°ì´í„°ë¥¼ ê²€ì¦í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

2. **`tools` ì„¤ì •ê³¼ OpenAI ë„êµ¬(í•¨ìˆ˜ í˜¸ì¶œ)**

    ```ts
    tools: {
        getCurrentWeather: {
            description: 'Get the current weather information for a specific city or region. The user can provide the name of the city and nation, and optionally specify the temperature unit (Celsius or Fahrenheit) and the language for the response.',
            parameters: weatherSchema,
        },
    },
    ```

    - **`tools`**: ì´ ê°ì²´ëŠ” OpenAI APIì™€ í†µì‹ í•  ë•Œ ì‚¬ìš©í•  ë„êµ¬(í•¨ìˆ˜ í˜¸ì¶œ)ë¥¼ ì •ì˜í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
    
    - **`getCurrentWeather`**
        - **description**: ì´ ë„êµ¬ê°€ í•˜ëŠ” ì¼ì„ ì„¤ëª…í•˜ëŠ” í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì´ ê²½ìš°, ì‚¬ìš©ìê°€ íŠ¹ì • ë„ì‹œë‚˜ ì§€ì—­ì˜ í˜„ì¬ ë‚ ì”¨ ì •ë³´ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë„ì‹œì™€ êµ­ê°€ì˜ ì´ë¦„ì„ ì œê³µí•  ìˆ˜ ìˆìœ¼ë©°, ì˜¨ë„ ë‹¨ìœ„ì™€ ì‘ë‹µ ì–¸ì–´ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        - **parameters**: ì´ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ ì…ë ¥ íŒŒë¼ë¯¸í„°ë¥¼ ì •ì˜í•˜ëŠ” ìŠ¤í‚¤ë§ˆì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì•ì„œ ê°€ì ¸ì˜¨ `weatherSchema`ë¥¼ ì‚¬ìš©í•˜ì—¬, OpenAIê°€ ì´ ë„êµ¬ë¥¼ í˜¸ì¶œí•  ë•Œ ì–´ë–¤ í˜•ì‹ì˜ ë°ì´í„°ë¥¼ ê¸°ëŒ€í•˜ëŠ”ì§€ ëª…í™•íˆ í•©ë‹ˆë‹¤.

<ToggleContent title="OpenAI ë„êµ¬(í•¨ìˆ˜ í˜¸ì¶œ)ì˜ ì„¤ì • ì˜ë¯¸">
ì´ ì„¤ì •ì€ OpenAIê°€ `getCurrentWeather` ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ì±—ë´‡ê³¼ ëŒ€í™” ì¤‘ íŠ¹ì • ë„ì‹œì˜ ë‚ ì”¨ë¥¼ ë¬»ëŠ”ë‹¤ë©´, OpenAIëŠ” ì´ ë„êµ¬ë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ìˆ˜ ìˆë„ë¡ ì‚¬ìš©ìê°€ ë¬¸ì˜í•œ ì •ë³´ë¥¼ í˜•ì‹ ìˆëŠ” ë°ì´í„°ë¡œ ì „ì†¡í•´ ì¤ë‹ˆë‹¤.. 

- `weatherSchema`ë¥¼ í†µí•´ OpenAIëŠ” ì…ë ¥ ë°ì´í„°ì˜ í˜•ì‹ì„ ê²€ì¦í•˜ê³  í•„ìš”í•œ ì •ë³´ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ë„êµ¬ì˜ ì„¤ëª…ì€ OpenAIê°€ í•´ë‹¹ ë„êµ¬ë¥¼ ì–¸ì œ, ì–´ë–»ê²Œ ì‚¬ìš©í• ì§€ ì´í•´í•˜ë„ë¡ ë•ìŠµë‹ˆë‹¤.
</ToggleContent>

---


## í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ ì—°ë™ ë° UIë¡œ ë³´ì—¬ì£¼ê¸°
ë§ˆì§€ë§‰ìœ¼ë¡œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì™€ UI ì»´í¬ë„ŒíŠ¸ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•´
`app/usechat/page.tsx` íŒŒì¼ì— ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€ êµ¬í˜„í•©ë‹ˆë‹¤.


```tsx:app/usechat/page.tsx showLineNumbers {5, 9-10, 21, 24-33, 66-93}
'use client';

import { useEffect, useState } from 'react';
import { Message, useChat } from 'ai/react';
import { ToolInvocation } from 'ai';

import LoadingIndicator from '@/components/loading-indicator';
import SubmitButton from '@/components/submit-button';
import WeatherCard from '@/components/weather-card';
import { WeatherParams, fetchWeatherData } from '@/base/weather';

import { remark } from 'remark';
import html from 'remark-html';
import remarkGfm from 'remark-gfm';

interface ExtendedMessage extends Message {
  htmlContent?: string;
}

export default function Chat() {
  const { messages, input, isLoading, handleInputChange, handleSubmit, stop, addToolResult } =
    useChat({
      maxToolRoundtrips: 5,
      async onToolCall({ toolCall }) {
        if (toolCall.toolName === 'getCurrentWeather') {
            console.info('onToolCall(): ', toolCall);
            const params = toolCall.args as WeatherParams;
            console.info('onToolCall() params: ', params);
            const weatherData = await fetchWeatherData(params);

            return JSON.stringify(weatherData);
        }
      },
    });

  const [renderedMessages, setRenderedMessages] = useState<ExtendedMessage[]>([]);

  useEffect(() => {
    const processMessages = async () => {
      const updatedMessages = await Promise.all(
        messages.map(async (m) => {
          const processedContent = await remark()
            .use(remarkGfm)
            .use(html)
            .process(m.content);
          return { ...m, htmlContent: processedContent.toString() };
        })
      );
      setRenderedMessages(updatedMessages);
    };
    processMessages();
  }, [messages]);

  return (
    <div className="flex flex-col items-center justify-between w-full h-screen">
      <div className="w-full h-full max-w-md p-6 bg-white rounded-lg shadow-md">
        <div className="flex flex-col justify-between h-full">
          <div className="overflow-y-auto">
            {renderedMessages.map((m) => (
              <div key={m.id} className="space-y-4">
                <strong>{m.role}:</strong>
                <div
                  className="prose"
                  dangerouslySetInnerHTML={{ __html: m.htmlContent || m.content }}
                />
                {m.toolInvocations?.map((toolInvocation: ToolInvocation) => {
                  const toolCallId = toolInvocation.toolCallId;
                  const addResult = (result: string) =>
                    addToolResult({ toolCallId, result });

                  if (toolInvocation.toolName == 'getCurrentWeather') {
                    return 'result' in toolInvocation ? (
                      <div key={toolCallId} className="space-y-2">
                        <WeatherCard data={toolInvocation.result} />
                      </div>
                    ) : (
                      <div key={toolCallId} className="space-y-2">
                        Calling {toolInvocation.toolName}...
                      </div>
                    );
                  }

                  return 'result' in toolInvocation ? (
                    <div key={toolCallId} className="space-y-2">
                      Tool call {`${toolInvocation.toolName}: `}
                      {toolInvocation.result}
                    </div>
                  ) : (
                    <div key={toolCallId} className="space-y-2">
                      Calling {toolInvocation.toolName}...
                    </div>
                  );
                })}
                <br />
              </div>
            ))}
          </div>
          {isLoading && <LoadingIndicator />}
          <form onSubmit={handleSubmit} className="flex w-full mt-4">
            <input
              value={input}
              onChange={handleInputChange}
              className="w-full p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring focus:border-blue-300"
              disabled={isLoading}
            />
            <SubmitButton isLoading={isLoading} isDisabled={!input.trim()} onStop={stop} />
          </form>
        </div>
      </div>
    </div>
  );
}
```

### OpenAI ë„êµ¬ì™€ ì—°ë™í•˜ì—¬ ì‹¤ì‹œê°„ ë‚ ì”¨ ê°€ì ¸ì˜¤ê¸°
ì•„ë˜ ì½”ë“œëŠ” `useChat()` í›… ë‚´ì—ì„œ `onToolCall` í•¨ìˆ˜ì—ì„œ OpenAI ë„êµ¬ í˜¸ì¶œ ì‹œ ì‹¤ì‹œê°„ ë‚ ì”¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê³¼ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```tsx
async onToolCall({ toolCall }) {
  if (toolCall.toolName === 'getCurrentWeather') {
    const params = toolCall.args as WeatherParams;
    const weatherData = await fetchWeatherData(params);
    return JSON.stringify(weatherData);
  }
}
```

- **ë„êµ¬ í˜¸ì¶œ ê°ì§€**: OpenAIê°€ `getCurrentWeather` ë„êµ¬ë¥¼ í˜¸ì¶œí–ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„° ì¶”ì¶œ**: ë„êµ¬ í˜¸ì¶œ ì‹œ ì „ë‹¬ëœ ì¸ìë¥¼ `WeatherParams` íƒ€ì…ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.
- **ì™¸ë¶€ API í˜¸ì¶œ**: `fetchWeatherData(params)`ë¥¼ ì‚¬ìš©í•´ OpenWeatherMap APIì—ì„œ ì‹¤ì‹œê°„ ë‚ ì”¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
- **ë°ì´í„° ë°˜í™˜**: ê°€ì ¸ì˜¨ ë‚ ì”¨ ë°ì´í„°ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•´ ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ ê³¼ì •ì€ OpenAI ë„êµ¬ í˜¸ì¶œì— ë”°ë¼ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ UIì— ë°˜ì˜í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

### ì‹¤ì‹œê°„ ì •ë³´ë¥¼ OpenAI ì–¸ì–´ ëª¨ë¸ì— ë‹¤ì‹œ ë³´ë‚´ê¸°

ì´ ì½”ë“œëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ê°€ì ¸ì˜¨ ì •ë³´ë¥¼ OpenAI ì–¸ì–´ ëª¨ë¸ì— ë‹¤ì‹œ ë³´ë‚´ê³ , ê·¸ ê²°ê³¼ë¥¼ UIì— ë°˜ì˜í•˜ëŠ” ê³¼ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

- **`useChat()` í›…**ì—ì„œ `addToolResult`ëŠ” ë„êµ¬ í˜¸ì¶œì˜ ê²°ê³¼ë¥¼ OpenAI ì–¸ì–´ ëª¨ë¸ë¡œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
  ```tsx {3}
  {m.toolInvocations?.map((toolInvocation: ToolInvocation) => {
    const toolCallId = toolInvocation.toolCallId;
    const addResult = (result: string) =>
      addToolResult({ toolCallId, result });
  ```
  - `toolInvocation`ì„ í†µí•´ ê° ë„êµ¬ í˜¸ì¶œì— ëŒ€í•œ ì •ë³´ë¥¼ ìˆœíšŒí•˜ë©°, ë„êµ¬ í˜¸ì¶œ ID(`toolCallId`)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
  - `addResult` í•¨ìˆ˜ëŠ” ë„êµ¬ í˜¸ì¶œì˜ ê²°ê³¼ë¥¼ OpenAI ëª¨ë¸ì— ì „ë‹¬í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ë©”ì‹œì§€ì— ë°˜ì˜í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹¤ì‹œê°„ ì •ë³´(ì˜ˆ: ë‚ ì”¨ ë°ì´í„°)ë¥¼ ì–¸ì–´ ëª¨ë¸ì˜ ì‘ë‹µì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ê³¼ì •ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ëª¨ë¸ì— ë°˜ì˜í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ í‘œì‹œí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

### ë‚ ì”¨ ì •ë³´ë¥¼ UIë¡œ ë³´ì—¬ ì£¼ê¸°
ì´ ì½”ë“œëŠ” OpenAI ë„êµ¬ í˜¸ì¶œ ê²°ê³¼ë¥¼ UIì— í‘œì‹œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. íŠ¹íˆ, ì‚¬ìš©ìê°€ ìš”ì²­í•œ ë‚ ì”¨ ì •ë³´ë¥¼ UIë¡œ ë Œë”ë§í•˜ëŠ” ë¶€ë¶„ì„ ë‹¤ë£¨ê³  ìˆìŠµë‹ˆë‹¤.

```tsx
if (toolInvocation.toolName == 'getCurrentWeather') {
  return 'result' in toolInvocation ? (
    <div key={toolCallId} className="space-y-2">
      <WeatherCard data={toolInvocation.result} />
    </div>
  ) : (
    <div key={toolCallId} className="space-y-2">
      Calling {toolInvocation.toolName}...
    </div>
  );
}
```

- **`toolInvocation.toolName == 'getCurrentWeather'`**: 
  - ì´ ì¡°ê±´ë¬¸ì€ ë„êµ¬ í˜¸ì¶œì´ 'getCurrentWeather'ë¼ëŠ” ì´ë¦„ì˜ ë„êµ¬ë¥¼ í˜¸ì¶œí•œ ê²ƒì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ ë„êµ¬ëŠ” ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

- **ê²°ê³¼ ì²˜ë¦¬ ë° ë Œë”ë§**:
  - **ê²°ê³¼ê°€ ìˆì„ ê²½ìš° (`'result' in toolInvocation`)**:
    - `toolInvocation.result`ì— ì €ì¥ëœ ë‚ ì”¨ ì •ë³´ë¥¼ UIì— í‘œì‹œí•˜ê¸° ìœ„í•´ `WeatherCard` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 
    - `WeatherCard`ëŠ” ë‚ ì”¨ ì •ë³´ë¥¼ ë³´ê¸° ì¢‹ì€ ì¹´ë“œ í˜•íƒœë¡œ ë Œë”ë§í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
    - ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ í¬í•¨í•œ `<div>` ìš”ì†ŒëŠ” `toolCallId`ë¥¼ `key`ë¡œ ì‚¬ìš©í•˜ì—¬ ê³ ìœ ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.
  
  - **ê²°ê³¼ê°€ ì•„ì§ ì—†ì„ ê²½ìš°**:
    - ë„êµ¬ í˜¸ì¶œì´ ì§„í–‰ ì¤‘ì„ì„ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, "Calling getCurrentWeather..."ë¼ëŠ” í…ìŠ¤íŠ¸ê°€ í‘œì‹œë˜ì–´ ì‚¬ìš©ìì—ê²Œ ë„êµ¬ í˜¸ì¶œì´ ì²˜ë¦¬ ì¤‘ì„ì„ ì•Œë¦½ë‹ˆë‹¤.

### ì¼ë°˜ ë„êµ¬ í˜¸ì¶œ ì²˜ë¦¬

```tsx
return 'result' in toolInvocation ? (
  <div key={toolCallId} className="space-y-2">
    Tool call {`${toolInvocation.toolName}: `}
    {toolInvocation.result}
  </div>
) : (
  <div key={toolCallId} className="space-y-2">
    Calling {toolInvocation.toolName}...
  </div>
);
```
- ìœ„ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” 'getCurrentWeather' ì™¸ì˜ ë‹¤ë¥¸ ë„êµ¬ í˜¸ì¶œì— ëŒ€í•´ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ê²°ê³¼ê°€ ìˆìœ¼ë©´ ë„êµ¬ ì´ë¦„ê³¼ ê²°ê³¼ë¥¼ UIì— í‘œì‹œí•˜ê³ , ê²°ê³¼ê°€ ì—†ìœ¼ë©´ í˜¸ì¶œ ì¤‘ì„ì„ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

---

ì§€ê¸ˆê¹Œì§€ êµ¬í˜„í•œ ë‚´ìš©ì„ ì €ì¥í•œ í›„, `npm run dev` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì²˜ìŒì— ë³´ì…¨ë˜ ì‹¤í–‰ í™”ë©´ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ë‹¤ìŒ ê³¼ì • ì•ˆë‚´

ì§€ê¸ˆê¹Œì§€ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì±„íŒ… ì„œë¹„ìŠ¤ì— OpenAI ë„êµ¬ì™€ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì—°ë™í•˜ëŠ” ë°©ë²•ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

ë‹¤ìŒ ê³¼ì •ì¸ [AI SDK RSCë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œ ë‚ ì”¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ì—¬ ìŠ¤íŠ¸ë¦¬ë°](/example/weather-ai-chatbot/server-rendering)ì—ì„œëŠ” ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ëŒ€ì‹  ë¦¬ì•¡íŠ¸ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì¼í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.

